<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Checkout</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="./css/style.css"/>
  <link rel="icon" href="./assets/favicon-32x32.png" type="image/x-icon">
</head>
<body>

  <!-- Botón hamburguesa -->
  <button id="toggleNav" class="hamburger-btn" aria-label="Menú">
    <i class="bi bi-list"></i>
  </button>

  <!-- Sidebar cliente -->
  <nav id="sidebar" class="sidebar">
    <ul>
      <li><a href="./client-dashboard.html"><i class="bi bi-house-fill"></i> Inicio</a></li>
      <li><a href="./events.html"><i class="bi bi-calendar-event"></i> Eventos</a></li>
      <li><a href="./store.html"><i class="bi bi-bag-fill"></i> Tienda</a></li>
      <li><a href="#" id="logoutSidebar"><i class="bi bi-box-arrow-right"></i> Cerrar sesión</a></li>
    </ul>
  </nav>

  <main class="container">
    <a href="./store.html" class="d-inline-flex align-items-center gap-2 mt-3 mb-2 text-decoration-none">
      <i class="bi bi-arrow-left"></i> Seguir comprando
    </a>

    <div class="checkout-wrap">
      <!-- Carrito -->
      <section class="checkout-card">
        <h5 class="mb-3">Tu carrito</h5>
        <div id="ckList" class="vstack gap-3"></div>
        <div class="d-flex justify-content-between mt-3 pt-2 border-top border-secondary">
          <strong>Total</strong><strong id="ckTotal">—</strong>
        </div>
      </section>

      <!-- Pago (demo visual) -->
      <section class="checkout-card">
        <h5 class="mb-3">Detalles de pago</h5>
        <div class="d-flex gap-2 mb-2">
          <img src="https://img.icons8.com/color/32/visa.png"/>
          <img src="https://img.icons8.com/color/32/mastercard.png"/>
          <img src="https://img.icons8.com/color/32/amex.png"/>
          <img src="https://img.icons8.com/color/32/paypal.png"/>
        </div>

        <div class="mb-2">
          <label class="form-label">Nombre en la tarjeta</label>
          <input class="form-control" placeholder="Nombre y apellido">
        </div>
        <div class="mb-2">
          <label class="form-label">Número de tarjeta</label>
          <input class="form-control" inputmode="numeric" placeholder="0000 0000 0000 0000">
        </div>
        <div class="row g-2">
          <div class="col-6">
            <label class="form-label">Expira</label>
            <input class="form-control" placeholder="MM/AA">
          </div>
          <div class="col-6">
            <label class="form-label">CVV</label>
            <input class="form-control" inputmode="numeric" placeholder="***">
          </div>
        </div>

        <hr class="border-secondary">

        <div class="d-flex justify-content-between">
          <span>Subtotal</span> <span id="ckSubtotal">—</span>
        </div>
        <div class="d-flex justify-content-between">
          <span>Envío</span> <span id="ckShipping">—</span>
        </div>
        <div class="d-flex justify-content-between border-top border-secondary pt-2 mt-2">
          <strong>Total</strong> <strong id="ckGrand">—</strong>
        </div>

        <button id="ckPay" class="btn success mt-3 w-100">Checkout</button>
        <div class="mt-2" style="font-size:.85rem; color:#8b949e;">
          * Vista de demostración (sin cobro real)
        </div>
      </section>
    </div>
  </main>

  <div id="toast-container"></div>
  <script type="module" src="./js/toast.js"></script>
  <script type="module" src="./js/firebase-config.js"></script>
  <script type="module" src="./js/checkout.js"></script>

  <script>
    document.getElementById("toggleNav")
      .addEventListener("click", ()=> document.getElementById("sidebar").classList.toggle("active"));
    document.getElementById("logoutSidebar")
      .addEventListener("click", async (e)=>{
        e.preventDefault();
        const { getAuth, signOut } = await import("https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js");
        const { showAlert } = await import("./js/showAlert.js");
        try { await signOut(getAuth()); showAlert("Has cerrado sesión","success"); }
        catch { showAlert("Error al cerrar sesión","error"); }
        finally { setTimeout(()=> location.href="index.html",1000); }
      });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
