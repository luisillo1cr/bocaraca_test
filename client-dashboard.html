<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calendario de Clases</title>

  <!-- Libs CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"/>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css" rel="stylesheet" />
  <!-- Global CSS -->
  <link rel="stylesheet" href="./css/style.css" />

  <!-- PWA -->
  <link rel="icon" href="./assets/favicon-32x32.png" type="image/x-icon">
  <link rel="manifest" href="./manifest.webmanifest?v=2025.10.20.v7">
  <meta name="theme-color" content="#0d1117">
  <link rel="apple-touch-icon" href="./assets/android-chrome-512x512.png">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>

<body class="client-page">
  <!-- Hamburguesa como en admin -->
  <button id="toggleNav" class="hamburger-btn" aria-label="Menú">
    <i class="bi bi-list"></i>
  </button>

  <!-- Sidebar -->
  <nav id="sidebar" class="sidebar">
    <ul>
      <li><a href="./client-dashboard.html"><i class="bi bi-house-fill"></i> Inicio</a></li>
      <li><a href="./profile.html"><i class="bi bi-person-circle"></i> Mi perfil</a></li>
      <li><a id="navInstall" href="#"><i class="bi bi-download"></i> Instalar app</a></li>
      <li><a id="navInstallIOS" href="#"><i class="bi bi-apple"></i> ¿iPhone?</a></li>
      <li><a id="navHardReset" href="#"><i class="bi bi-arrow-repeat"></i> Forzar actualización</a></li>
      <li><a id="logoutSidebar" href="#"><i class="bi bi-box-arrow-right"></i> Cerrar sesión</a></li>
    </ul>
  </nav>

  <!-- Header con look de admin -->
  <header class="header">
    <div class="logo">
      <img src="./assets/android-chrome-512x512.png" alt="Logo" class="logo-img">
    </div>
    <h1 class="page-title">Calendario de Clases</h1>
  </header>

  <main class="container">
    <!-- Botón QR (los demás se movieron al navbar) -->
    <div class="client-cta">
      <button id="openScannerBtn" class="btn">Escanear Código QR</button>
  </div>

    <!-- Calendarios + switch -->
    <section class="calendar-wrapper">
      <div class="card calendar-card">
        <div id="roleSwitchWrap" class="role-switch hidden">
          <span class="role-label">Estudiante</span>
          <label class="toggle">
            <input type="checkbox" id="modeToggle" aria-label="Cambiar a vista de profesor">
            <span class="slider"></span>
          </label>
          <span class="role-label">Profesor</span>
        </div>

        <!-- Flip deck 3D -->
        <section id="calendarDeck" class="cal-deck" data-mode="student">
          <div class="face face-student">
            <div id="calendarStudent" class="fc-shell"></div>
          </div>
          <div class="face face-prof">
            <div id="calendarProf" class="fc-shell"></div>
          </div>
        </section>
      </div>
    </section>

    <!-- Modal escaneo -->
    <div id="scannerModal" class="asistencia-modal">
      <div class="modal-content">
        <h2>Escanear Código QR</h2>
        <div id="reader" class="qr-reader"></div>
        <div class="modal-actions">
          <button id="btnCloseScanner" class="btn error">Cerrar</button>
        </div>
      </div>
    </div>
  </main>

  <div id="toast-container"></div>

  <!-- Libs JS -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/locales/es.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.7/html5-qrcode.min.js"></script>

  <!-- App -->
  <script type="module" src="./js/toast.js"></script>
  <script type="module" src="./js/client.js"></script>
  <script type="module" src="./js/scan-asistencia.js"></script>
  <script type="module" src="./js/pwa-install.js"></script>
  <script type="module" src="./js/sw-register.js"></script>

  <footer>
    <p>© 2025 <a href="https://github.com/luisillo1cr" target="_blank">luisillo1cr</a>. Todos los derechos reservados.</p>
  </footer>
</body>
</html>
